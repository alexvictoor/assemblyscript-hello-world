{"mappings":"AAAOA,eAAeC,EAAYC,EAAQC,EAAU,IAClD,MAAMC,EAAiB,CACrBC,IAAKC,OAAOC,OAAOD,OAAOE,OAAOC,YAAaN,EAAQE,KAAO,GAAI,CAC/DK,MAAMC,EAASC,EAAUC,EAAYC,GAEnCH,EAAUI,EAAaJ,IAAY,GACnCC,EAAWG,EAAaH,IAAa,GACrCC,KAA4B,EAC5BC,KAAgC,EAC/B,MAEC,MAAME,MAAM,GAAGL,QAAcC,KAAYC,KAAcC,MAFxD,QATTG,QAgBUA,SAAkBC,YAAYC,YAAYjB,EAAQE,GACpDgB,EAASH,EAAQG,QAAUjB,EAAQE,IAAIe,OAQ7C,SAASL,EAAaM,GACpB,IAAKA,EAAS,OAAO,KACrB,MACEC,EAAMD,EAAU,IAAIE,YAAYH,EAAOI,QAAQH,EAAU,IAAM,KAAO,EACtEI,EAAY,IAAIC,YAAYN,EAAOI,QACrC,IACEG,EAAQN,IAAY,EACpBO,EAAS,GACX,KAAON,EAAMK,EAAQ,MAAMC,GAAUC,OAAOC,gBAAgBL,EAAUM,SAASJ,EAAOA,GAAS,OAC/F,OAAOC,EAASC,OAAOC,gBAAgBL,EAAUM,SAASJ,EAAOL,IAcnE,OA9BuBhB,OAAO0B,eAAe,CAC3CC,MAAMC,IAEJA,EAeJ,SAAuBC,GACrB,GAAa,MAATA,EAAe,OAAO,EAC1B,MACEC,EAASD,EAAMC,OACff,EAAUJ,EAAQoB,MAAMD,GAAU,EAAG,KAAO,EAC5CX,EAAY,IAAIC,YAAYN,EAAOI,QACrC,IAAK,IAAIc,EAAI,EAAGA,EAAIF,IAAUE,EAAGb,GAAWJ,IAAY,GAAKiB,GAAKH,EAAMI,WAAWD,GACnF,OAAOjB,EAtBEmB,CAAcN,IAwBzB,WACE,MAAMO,UAAU,0BAzBgBC,GACvB3B,EAAaE,EAAQgB,MAAMC,KAAU,KAE7CjB,GCtBQjB,WACT,MAHJ2C,IAGYA,EAHZV,MAGiBA,SAAgBhC,QAAkBiB,YAAY0B,iBAAiBnC,WAAWoC,MAAM,eAAgB,CACzGxC,IAAK,KAETyC,QAAQC,IAAIJ,EAAI,GAAI,KACpBG,QAAQC,IAAId,EAAM,YAGtBe","sources":["build/debug.js","src/index.ts"],"sourcesContent":["export async function instantiate(module, imports = {}) {\n  const adaptedImports = {\n    env: Object.assign(Object.create(globalThis), imports.env || {}, {\n      abort(message, fileName, lineNumber, columnNumber) {\n        // ~lib/builtins/abort(~lib/string/String | null?, ~lib/string/String | null?, u32?, u32?) => void\n        message = __liftString(message >>> 0);\n        fileName = __liftString(fileName >>> 0);\n        lineNumber = lineNumber >>> 0;\n        columnNumber = columnNumber >>> 0;\n        (() => {\n          // @external.js\n          throw Error(`${message} in ${fileName}:${lineNumber}:${columnNumber}`);\n        })();\n      },\n    }),\n  };\n  const { exports } = await WebAssembly.instantiate(module, adaptedImports);\n  const memory = exports.memory || imports.env.memory;\n  const adaptedExports = Object.setPrototypeOf({\n    hello(name) {\n      // assembly/index/hello(~lib/string/String) => ~lib/string/String\n      name = __lowerString(name) || __notnull();\n      return __liftString(exports.hello(name) >>> 0);\n    },\n  }, exports);\n  function __liftString(pointer) {\n    if (!pointer) return null;\n    const\n      end = pointer + new Uint32Array(memory.buffer)[pointer - 4 >>> 2] >>> 1,\n      memoryU16 = new Uint16Array(memory.buffer);\n    let\n      start = pointer >>> 1,\n      string = \"\";\n    while (end - start > 1024) string += String.fromCharCode(...memoryU16.subarray(start, start += 1024));\n    return string + String.fromCharCode(...memoryU16.subarray(start, end));\n  }\n  function __lowerString(value) {\n    if (value == null) return 0;\n    const\n      length = value.length,\n      pointer = exports.__new(length << 1, 1) >>> 0,\n      memoryU16 = new Uint16Array(memory.buffer);\n    for (let i = 0; i < length; ++i) memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\n    return pointer;\n  }\n  function __notnull() {\n    throw TypeError(\"value must not be null\");\n  }\n  return adaptedExports;\n}\n","import { instantiate } from \"../build/debug\";\n\nconst init = async () => {\n    const { add, hello } = await instantiate(await WebAssembly.compileStreaming(globalThis.fetch(\"debug.wasm\")), {\n        env: {}\n    });\n    console.log(add(42, 36));\n    console.log(hello('Devoxx'));\n}\n\ninit();\n\n\n"],"names":["async","$df32933b3b96d487$export$f9bb8d20ccc7477a","module","imports","adaptedImports","env","Object","assign","create","globalThis","abort","message","fileName","lineNumber","columnNumber","__liftString","Error","exports","WebAssembly","instantiate","memory","pointer","end","Uint32Array","buffer","memoryU16","Uint16Array","start","string","String","fromCharCode","subarray","setPrototypeOf","hello","name","value","length","__new","i","charCodeAt","__lowerString","TypeError","__notnull","add","compileStreaming","fetch","console","log","$b4e14b6b8da86996$var$init"],"version":3,"file":"index.88b1f035.js.map"}